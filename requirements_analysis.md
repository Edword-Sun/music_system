# 前端项目需求分析文档

## 1. 关键缺失功能

### 1.1 用户认证系统（登录/注销/注册）
*   **现状：** 应用程序目前没有明确的登录、注册或注销页面。`ProfilePage` 假设用户已登录，并包含一个导航到 `/login` 的按钮，但该路由在 `pages` 目录中不存在。
*   **影响：** 无法管理用户会话，无法实现用户个性化功能，安全性不足。
*   **建议：**
    *   创建 `LoginPage.jsx` 和 `RegisterPage.jsx`。
    *   实现用户登录、注册和注销功能，包括与后端认证 API 的集成。
    *   实现会话管理（例如，使用 JWT 或其他令牌机制）。
    *   在 `ProfilePage` 中集成实际的用户数据获取和更新逻辑。

### 1.2 实际音乐播放功能
*   **现状：** `HomePage.jsx` 和 `MusicPage.jsx` 中存在音乐播放器的 UI 元素（如播放/暂停按钮），但没有实际的音频播放功能。
*   **影响：** 用户无法在前端播放音乐。
*   **建议：**
    *   集成 HTML5 `<audio>` 元素或使用专门的音频播放库。
    *   实现播放、暂停、上一首、下一首、音量控制、进度条等功能。
    *   考虑实现播放队列和循环播放功能。

### 1.3 音乐和用户的后端搜索/过滤
*   **现状：** `client.js` 中的 `findMusic`、`findComment`、`findUserActionProperties` API 被指出存在限制，因为后端期望 GET 请求带有 JSON 主体，而浏览器不支持。`UserPage` 目前在获取所有用户后进行客户端过滤。
*   **影响：** 无法高效地搜索和过滤大量音乐或用户数据。
*   **建议：**
    *   **后端修改：** 修改后端 API，使 `find` 接口支持通过查询参数进行搜索，或者使用 POST 请求进行搜索。
    *   **前端实现：** 在 `MusicPage` 和 `UserPage` 中添加搜索栏，并将其与修改后的后端搜索 API 集成。

### 1.4 音乐和用户的后端分页
*   **现状：** `MusicPage` 中的 `fetchMusic` 仅获取前 10 个音乐条目。`UserPage` 中的用户列表分页是客户端处理的。
*   **影响：** 对于大型数据集，客户端分页效率低下，且无法查看所有数据。
*   **建议：**
    *   **后端修改：** 修改后端 API，使 `listMusics` 和 `listUsers` 支持分页参数（例如 `page` 和 `size`）。
    *   **前端实现：** 在 `MusicPage` 和 `UserPage` 中实现后端分页逻辑，包括分页控件和状态管理。

## 2. 重要缺失功能/改进

### 2.1 “我的收藏”页面/功能
*   **现状：** 侧边栏导航中存在“我的收藏”项，但没有相应的页面或 API 集成来管理用户收藏。`MusicPage` 中的 `FavoriteIcon` 也没有关联逻辑。
*   **建议：**
    *   创建 `FavoritesPage.jsx`。
    *   实现将音乐添加到收藏夹和从收藏夹中移除的功能，并与后端 API 集成。
    *   在 `FavoritesPage` 中显示用户收藏的音乐列表。

### 2.2 详细音乐/评论/用户操作属性检索
*   **现状：** 缺少通过 ID 直接检索单个音乐、评论或用户操作属性的 API 调用（例如 `getMusicById`）。
*   **建议：**
    *   在 `client.js` 中添加 `getMusicById`、`getCommentById`、`getUserActionPropertiesById` 等 API 函数。
    *   在需要显示单个实体详细信息的页面中使用这些 API。

### 2.3 评论和用户操作属性管理
*   **现状：** `MusicPage` 中集成了 `CommentSection` 和 `UserActionPropertiesSection` 组件，但这些组件本身的 CRUD 逻辑尚未实现。
*   **建议：**
    *   在 `CommentSection` 中实现获取、创建、更新和删除评论的逻辑。
    *   在 `UserActionPropertiesSection` 中实现获取、创建、更新和删除用户操作属性的逻辑。

### 2.4 音乐播放器的全局状态管理
*   **现状：** 音乐播放器的状态（当前曲目、播放状态、队列）在不同组件之间没有集中管理。
*   **建议：**
    *   引入全局状态管理解决方案（如 React Context API、Redux 或 Zustand）来管理音乐播放器的状态，确保不同组件之间的数据一致性。

### 2.5 健壮的错误处理和加载指示器
*   **现状：** 尽管使用了 Snackbar 进行通知，但对于所有 API 交互，缺乏一致和全面的错误处理和加载状态指示。
*   **建议：**
    *   为所有 API 调用实现统一的错误处理机制。
    *   在数据获取、创建、更新和删除操作期间显示加载指示器（例如，旋转器或骨架屏）。

### 2.6 密码更改功能
*   **现状：** 用户无法通过 `ProfilePage` 更改密码。
*   **建议：**
    *   在 `ProfilePage` 或单独的页面中添加密码更改功能，并与后端 API 集成。

### 2.7 用户角色/权限
*   **现状：** 没有用户角色或权限管理的指示。
*   **建议：**
    *   如果需要，实现用户角色和权限管理，以控制不同用户对特定功能的访问。

### 2.8 “升级到专业版”功能
*   **现状：** `HomePage` 中存在“升级到专业版”按钮，但没有关联的逻辑。
*   **建议：**
    *   根据产品需求，实现此功能的逻辑，例如导航到订阅页面或显示升级提示。

## 3. 次要改进

### 3.1 `HomePage.jsx` 动态数据
*   **现状：** `HomePage` 中的“最近播放”和“推荐播放列表”部分使用硬编码的模拟数据。
*   **建议：**
    *   从后端 API 获取动态数据来填充这些部分。

### 3.2 `ProfilePage.jsx` `fetchUser` 实现
*   **现状：** `ProfilePage` 中调用了未定义的 `fetchUser` 函数。
*   **建议：**
    *   使用 `client.js` 中的 `findUser` API 实现 `fetchUser` 函数，以获取当前用户数据。